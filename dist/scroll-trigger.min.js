!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).ScrollTrigger=t()}(this,function(){"use strict";return class ScrollTrigger{#e=[];#t=-1;#s=null;#r={offset:100,threshold:.1,throttle:50,behavior:"smooth",onIndexChange:null};#n=new Map;#i=null;#o=!1;#l=null;#h=null;constructor(e={}){this.#r={...this.#r,...e},this.#e=this.#c(this.#r.sections),0!==this.#e.length?(this.#f(),this.#d()&&this.#u(),this.#a()):console.warn("ScrollTrigger: No elements found")}#c(e){return"string"==typeof e?Array.from(document.querySelectorAll(e)):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[]}#g(e){return"string"==typeof e&&e.includes("%")}#m(e){if(this.#g(e)){const t=parseFloat(e)/100;return Math.round(window.innerHeight*t)}return"number"==typeof e?e:100}#v(e){if(!e)return this.#r.offset;const t=e.getAttribute("data-animate-offset");return null!==t?/^\d+$/.test(t)?parseInt(t,10):t:this.#r.offset}#d(){return!!this.#g(this.#r.offset)||this.#e.some(e=>{const t=e.getAttribute("data-animate-offset");return t&&this.#g(t)})}#u(){this.#l=new ResizeObserver(()=>{this.#s&&this.#s.disconnect(),this.#f()}),this.#l.observe(document.documentElement)}#a(){this.#h=()=>{this.#b()},window.addEventListener("scroll",this.#h,{passive:!0})}#f(){const e=`0px 0px -${this.#m(this.#r.offset)}px 0px`;this.#s=new IntersectionObserver(e=>this.#p(e),{root:null,rootMargin:e,threshold:this.#r.threshold}),this.#e.forEach(e=>{this.#s.observe(e),this.#n.set(e,!1)})}#p(e){this.#o||(e.forEach(e=>{this.#n.set(e.target,e.isIntersecting)}),this.#b())}#b(){this.#i||(this.#i=setTimeout(()=>{this.#O(),this.#i=null},this.#r.throttle))}#O(){if(this.#o)return;let e=-1;for(let t=this.#e.length-1;t>=0;t--){const s=this.#e[t],r=this.#v(s),n=this.#m(r),i=window.innerHeight-n;if(s.getBoundingClientRect().top<=i){e=t;break}}if(e!==this.#t){const t=this.#t;this.#t=e;const s=this.#e[e]||null,r=this.#e[t]||null;this.#r.onIndexChange&&"function"==typeof this.#r.onIndexChange&&this.#r.onIndexChange({currentIndex:e,previousIndex:t,currentElement:s,previousElement:r}),this.#x("scroll-trigger:change",{index:e,previousIndex:t,section:s,previousSection:r})}}#x(e,t){"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))}getCurrentIndex(){return this.#t}getCurrentElement(){return this.#e[this.#t]||null}getElements(){return[...this.#e]}scrollToIndex(e,t={}){if(e<0||e>=this.#e.length)return void console.warn(`ScrollTrigger: Invalid index ${e}`);const s=this.#e[e],r=t.behavior||this.#r.behavior,n=t.offset||0,i=this.#v(s),o=this.#m(i),l=window.innerHeight-o,h=s.getBoundingClientRect(),c=window.pageYOffset||document.documentElement.scrollTop,f=h.top+c-l-n;window.scrollTo({top:f,behavior:r})}scrollToElement(e,t={}){const s=this.#e.indexOf(e);-1!==s?this.scrollToIndex(s,t):console.warn("ScrollTrigger: Element not found in tracked elements")}refresh(){this.#o||(this.#e.forEach(e=>{this.#s.unobserve(e),this.#s.observe(e)}),this.#O())}updateConfig(e={}){if(this.#o)return;const t="offset"in e&&e.offset!==this.#r.offset||"threshold"in e&&e.threshold!==this.#r.threshold;if(this.#r={...this.#r,...e},"offset"in e){const e=this.#d();e&&!this.#l?this.#u():!e&&this.#l&&(this.#l.disconnect(),this.#l=null)}t&&(this.#s&&this.#s.disconnect(),this.#f())}destroy(){this.#o||(this.#o=!0,this.#i&&(clearTimeout(this.#i),this.#i=null),this.#s&&(this.#s.disconnect(),this.#s=null),this.#l&&(this.#l.disconnect(),this.#l=null),this.#h&&(window.removeEventListener("scroll",this.#h),this.#h=null),this.#n.clear(),this.#e=[],this.#t=-1)}}});
