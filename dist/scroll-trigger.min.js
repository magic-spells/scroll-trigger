!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).ScrollTrigger={})}(this,function(e){"use strict";class ScrollTrigger{#e=[];#t=-1;#s=null;#i={offset:100,threshold:.1,throttle:100,behavior:"smooth",onIndexChange:null};#r=new Map;#n=null;#o=!1;#h=null;constructor(e={}){this.#i={...this.#i,...e},this.#e=this.#c(this.#i.sections),0!==this.#e.length?(this.#l(),this.#f()&&this.#d()):console.warn("ScrollTrigger: No sections found")}#c(e){return"string"==typeof e?Array.from(document.querySelectorAll(e)):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[]}#u(e){return"string"==typeof e&&e.includes("%")}#g(e){if(this.#u(e)){const t=parseFloat(e)/100;return Math.round(window.innerHeight*t)}return"number"==typeof e?e:100}#a(e){if(!e)return this.#i.offset;const t=e.getAttribute("data-animate-offset");return null!==t?/^\d+$/.test(t)?parseInt(t,10):t:this.#i.offset}#f(){return!!this.#u(this.#i.offset)||this.#e.some(e=>{const t=e.getAttribute("data-animate-offset");return t&&this.#u(t)})}#d(){this.#h=new ResizeObserver(()=>{this.#s&&this.#s.disconnect(),this.#l()}),this.#h.observe(document.documentElement)}#l(){const e=`0px 0px -${this.#g(this.#i.offset)}px 0px`;this.#s=new IntersectionObserver(e=>this.#v(e),{root:null,rootMargin:e,threshold:this.#i.threshold}),this.#e.forEach(e=>{this.#s.observe(e),this.#r.set(e,!1)})}#v(e){this.#o||(e.forEach(e=>{this.#r.set(e.target,e.isIntersecting)}),this.#b())}#b(){this.#n||(this.#n=setTimeout(()=>{this.#p(),this.#n=null},this.#i.throttle))}#p(){if(this.#o)return;let e=-1;for(let t=this.#e.length-1;t>=0;t--){const s=this.#e[t],i=this.#a(s),r=this.#g(i),n=window.innerHeight-r;if(s.getBoundingClientRect().top<=n){e=t;break}}if(e!==this.#t){const t=this.#t;this.#t=e;const s=this.#e[e]||null,i=this.#e[t]||null;this.#i.onIndexChange&&"function"==typeof this.#i.onIndexChange&&this.#i.onIndexChange(e,t,s,i),this.#O("scroll-trigger:change",{index:e,previousIndex:t,section:s,previousSection:i})}}#O(e,t){"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent(e,{bubbles:!0,detail:t}))}getCurrentIndex(){return this.#t}getCurrentSection(){return this.#e[this.#t]||null}getSections(){return[...this.#e]}scrollToIndex(e,t={}){if(e<0||e>=this.#e.length)return void console.warn(`ScrollTrigger: Invalid index ${e}`);const s=this.#e[e],i=t.behavior||this.#i.behavior,r=t.offset||0,n=this.#a(s),o=this.#g(n),h=window.innerHeight-o,c=s.getBoundingClientRect(),l=window.pageYOffset||document.documentElement.scrollTop,f=c.top+l-h-r;window.scrollTo({top:f,behavior:i})}scrollToSection(e,t={}){const s=this.#e.indexOf(e);-1!==s?this.scrollToIndex(s,t):console.warn("ScrollTrigger: Section not found in tracked sections")}refresh(){this.#o||(this.#e.forEach(e=>{this.#s.unobserve(e),this.#s.observe(e)}),this.#p())}updateConfig(e={}){if(this.#o)return;const t="offset"in e&&e.offset!==this.#i.offset||"threshold"in e&&e.threshold!==this.#i.threshold;if(this.#i={...this.#i,...e},"offset"in e){const e=this.#f();e&&!this.#h?this.#d():!e&&this.#h&&(this.#h.disconnect(),this.#h=null)}t&&(this.#s&&this.#s.disconnect(),this.#l())}destroy(){this.#o||(this.#o=!0,this.#n&&(clearTimeout(this.#n),this.#n=null),this.#s&&(this.#s.disconnect(),this.#s=null),this.#h&&(this.#h.disconnect(),this.#h=null),this.#r.clear(),this.#e=[],this.#t=-1)}}e.ScrollTrigger=ScrollTrigger,e.default=ScrollTrigger,Object.defineProperty(e,"__esModule",{value:!0})});
